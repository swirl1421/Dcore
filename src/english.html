<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="https://www.kaffir-lily.cc/favicon.ico" type="image/x-icon">

    <link href="https://fonts.loli.net/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet" type="text/css">
    <link href="https://lib.baomitu.com/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://lib.baomitu.com/animate.css/3.7.0/animate.min.css" rel="stylesheet">
    <script src="https://lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css" />
    <title>🔐英语单词拼写训练</title>
</head>
<style>
    .index {
        height: calc(100vh - 200px);
        width: 1100px;
        margin: 0 auto;
        background-color: orange;
        text-align: center;
        padding: 80px;
    }
    
    h1 {
        color: #fbe8d3;
        font-size: 100px;
        width: 800px;
        margin: 0 auto;
    }
    
    .input {
        margin: 100px auto;
        width: 800px;
    }
    
    .text_input {
        width: 400px;
        height: 50px;
        border-color: #3c763d;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
        font-size: 40px;
        color: #a82ffc;
        vertical-align: middle;
        text-align: center;
    }
</style>

<body>
    <div calss="big">
        <div class="index">
            <div class="clipped-box">
                <div class="content">
                    <h1 align="center" id="show_word">color</h1>
                </div>
            </div>
            <div class="input">
                <input type="text" class="text_input" id="word_input">
            </div>

        </div>
        <div style="margin:0 auto;width:1100px;" class="">
            <textarea name="" style="width:1100px;" id="word_data" rows="100" onblur="handle">
                
disabled
position
relative
absolute
fixed
activate
active
arrow
alpha
building
circle
cursor
display
duuble
element
filter
horizontal
important
language
navigation
pruple
pointer
dashed
decimal
division
font-family
needle
pause
January Jan.
February Feb.
March Mar.
April Ap.
May May.
June Jun.
July Jul.
August Aug.
September Sep.
October Oct.
November Nov.
December Dec.
Monday Mon.
Tuesday Tue.
Wednesday Wed.
Thursday Thu.
Friday Fri.
Saterday Sat.
Sunday Sun.
chunk
upgrade</textarea>
        </div>
    </div>
    <div id="bdtts_div_id">
        <audio id="tts_autio_id" autoplay="autoplay">
                    <source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=9&text=播报内容" type="audio/mpeg">
                    <embed id="tts_embed_id" height="0" width="0" src="">
                </audio>
    </div>
</body>
<script>
    let num = 0;
    let newArray = new Array();
    $("#word_input").keyup(function(key) {
        let inputWord = $(this).val();
        let showWord = $("#show_word").text();
        console.log(inputWord, showWord);
        if (inputWord == showWord) {
            doTTS(inputWord);
            $(".clipped-box div").click();
            num++;
            $("#show_word").text(newArray[num]);
            $(this).val("");
            $("#show_word").addClass("animated flipInX");
            setTimeout(function() {
                $("#show_word").removeClass("animated flipInX");
            }, 1000);
        }
    });

    $(function() {
        handle()


    });

    function handle() {
        let word = $("#word_data").val().split(/[\n]/);
        word.forEach(function(v, i) {
            let val = $.trim(v);
            if (val != "") {
                newArray.push(val);
            }
        });
        console.log(newArray);
        $("#show_word").text(newArray[num]);
    }

    function doTTS(text) {
        var ttsDiv = document.getElementById('bdtts_div_id');
        var ttsAudio = document.getElementById('tts_autio_id');
        var ttsText = text;
        // 这样为什么替换不了播放内容
        /*var ssrcc = 'http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=10&text='+ttsText;
        document.getElementById('tts_source_id').src=ssrcc;*/

        // 这样就可实现播放内容的替换了
        ttsDiv.removeChild(ttsAudio);
        var au1 = '<audio id="tts_autio_id" autoplay="autoplay">';
        var sss = '<source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=9&text=' + ttsText + '" type="audio/mpeg">';
        var eee = '<embed id="tts_embed_id" height="0" width="0" src="">';
        var au2 = '</audio>';
        ttsDiv.innerHTML = au1 + sss + eee + au2;

        ttsAudio = document.getElementById('tts_autio_id');

        ttsAudio.play();
    }
</script>

</html>